# @param {Character[][]} grid
# @return {Integer}
require 'byebug'
def num_islands(grid)
    islands = 0
    grid.each_with_index do |row, x|
        row.each_with_index do |col, y|
            if grid[x][y] === "1"
                eliminate_island(grid, [x, y])
                islands += 1
            end
        end
    end
    islands
end

def eliminate_island(grid, pos)
    child_dirs = [
        [-1, 0],
        [0, -1],
        [0, 1],
        [1, 0],
    ]

    child_dirs.each do |dx, dy|
        child_pos = [pos[0] + dx, pos[1] + dy]
        next unless child_pos[0] >= 0 && child_pos[0] < grid.length
        next unless child_pos[1] >= 0 && child_pos[1] < grid[0].length

        child = grid[child_pos[0]][child_pos[1]]

        if child == "1"
            grid[child_pos[0]][child_pos[1]] = "0"
            eliminate_island(grid, child_pos)
        end

    end
end

# p num_islands([["1","1","1","1","1","0","1","1","1","1","1","1","1","1","1","0","1","0","1","1"],["0","1","1","1","1","1","1","1","1","1","1","1","1","0","1","1","1","1","1","0"],["1","0","1","1","1","0","0","1","1","0","1","1","1","1","1","1","1","1","1","1"],["1","1","1","1","0","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],["1","0","0","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],["1","0","1","1","1","1","1","1","0","1","1","1","0","1","1","1","0","1","1","1"],["0","1","1","1","1","1","1","1","1","1","1","1","0","1","1","0","1","1","1","1"],["1","1","1","1","1","1","1","1","1","1","1","1","0","1","1","1","1","0","1","1"],["1","1","1","1","1","1","1","1","1","1","0","1","1","1","1","1","1","1","1","1"],["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],["0","1","1","1","1","1","1","1","0","1","1","1","1","1","1","1","1","1","1","1"],["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],["1","1","1","1","1","0","1","1","1","1","1","1","1","0","1","1","1","1","1","1"],["1","0","1","1","1","1","1","0","1","1","1","0","1","1","1","1","0","1","1","1"],["1","1","1","1","1","1","1","1","1","1","1","1","0","1","1","1","1","1","1","0"],["1","1","1","1","1","1","1","1","1","1","1","1","1","0","1","1","1","1","0","0"],["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"]])
p num_islands([["1","1","1","1","0"],["1","1","0","1","0"],["1","1","0","0","0"],["0","0","0","0","0"]])